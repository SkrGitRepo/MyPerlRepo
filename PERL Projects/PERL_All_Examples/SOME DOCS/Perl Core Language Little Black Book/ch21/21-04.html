<HTML>
<HEAD>
<META name=vsisbn content="1576104265">
<META name=vstitle content="Perl Core Language Little Black Book">
<META name=vsauthor content="Steven Holzner">
<META name=vspublisher content="The Coriolis Group">
<META name=vspubdate content="03/01/99">
<META name=vscategory content="Web and Software Development: Open Source Development: Languages: Perl,Web and Software Development: Programming, Scripting, and Markup Languages: Perl">





<TITLE>Perl Core Language Little Black Book:CGI: Multiuser Chat, Cookies, And Games</TITLE>

<!-- HEADER -->

<STYLE type="text/css"> 
 <!--
 A:hover  {
 	color : Red;
 }
 -->
</STYLE>

<META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
<script>
<!--
function displayWindow(url, width, height) {
         var Win = window.open(url,"displayWindow",'width=' + width +',height=' + height + ',resizable=1,scrollbars=yes');
	if (Win) {
		Win.focus();
	}
}
//-->
</script>
<SCRIPT>
<!--
function popUp(url) {
        var Win = window.open(url,"displayWindow",'width=400,height=300,resizable=1,scrollbars=yes');
	if (Win) {
		Win.focus();
	}
}
//-->
</SCRIPT>

<script language="JavaScript1.2">
<!--
function checkForQuery(fm) {
  /* get the query value */
  var i = escape(fm.query.value);
  if (i == "") {
      alert('Please enter a search word or phrase');
      return false;
  }                  /* query is blank, dont run the .jsp file */
  else return true;  /* execute the .jsp file */
}
//-->
</script>

<SCRIPT LANGUAGE="JavaScript">
<!--
var axel = Math.random() + "";
var ord = axel * 1000000000000000000 + "?";

//This part of script alleviates a Netscape document.write bug
<!-- 
NS4 = document.layers;
if (NS4) {
origWidth = innerWidth;
origHeight = innerHeight;
}
function reDo() {
if (innerWidth != origWidth || innerHeight != origHeight) 
location.reload();
}
if (NS4) onresize = reDo;
//-->
</SCRIPT> 
</HEAD>

<body background="/images/back.jpg" bgcolor="#FFFFFF" link="#003399" alink="#FF0000" vlink="#003399" topmargin=0 leftmargin=0 marginheight=0 marginwidth=0>

<table bgcolor="#003366" width="100%" border="0" cellpadding="0" cellspacing="0">
	<tr valign="top">
		<td height="95">
		&nbsp;&nbsp;<a href="http://www.earthweb.com" target="resource window"><img src="/images/ew_logo.jpg" width="82" height="58" alt="EarthWeb" border="0"></a>&nbsp;&nbsp;&nbsp;</td>
		<td height=95">
		<table width="100%">
			<tr valign="top">
			<td bgcolor="#003366" nowrap>
<SCRIPT LANGUAGE="javascript">
<!--
document.write('<NOLAYER>');
document.write('<IFRAME SRC="http://ad.doubleclick.net/adi/itk.earthweb.dart/b_soft_dev;a=b_soft_dev1;sz=468x60;ord=' + ord + '" width="468" height="60" frameborder="no" border="0" MARGINWIDTH="0" MARGINHEIGHT="0" SCROLLING="no">');
document.write('<A HREF="http://ad.doubleclick.net/jump/itk.earthweb.dart/b_soft_dev;abr=!ie;a=b_soft_dev1;sz=468x60;ord=' + ord + '" target="_top"><IMG SRC="http://ad.doubleclick.net/ad/itk.earthweb.dart/b_soft_dev;abr=!ie;a=b_soft_dev1;sz=468x60;ord=' + ord + '" border=0 height="60" width="468"></A>');
document.write('</IFRAME>');
document.write('</NOLAYER>');
document.write('<ILAYER id="layer1" visibility="hidden" width=468 height=60></ILAYER>');
//-->
</SCRIPT>
			</td>
			<td bgcolor="#003366" nowrap>
<SCRIPT LANGUAGE="javascript">
<!--
document.write('<NOLAYER>');
document.write('<IFRAME SRC="http://ad.doubleclick.net/adi/itk.earthweb.dart/b_soft_dev;a=b_soft_dev4;sz=160x60;ord=' + ord + '" width="160" height="60" frameborder="no" border="0" MARGINWIDTH="0" MARGINHEIGHT="0" SCROLLING="no">');
document.write('<A HREF="http://ad.doubleclick.net/jump/itk.earthweb.dart/b_soft_dev;abr=!ie;a=b_soft_dev4;sz=160x60;ord=' + ord + '" target="_top"><IMG SRC="http://ad.doubleclick.net/ad/itk.earthweb.dart/b_soft_dev;abr=!ie;a=b_soft_dev4;sz=160x60;ord=' + ord + '" border=0 height="60" width="160"></A>');
document.write('</IFRAME>');
document.write('</NOLAYER>');
document.write('<ILAYER id="layer4" visibility="hidden" width=160 height=60></ILAYER>');
//-->
</SCRIPT>
			</td>
			<td bgcolor="#003366" nowrap><a href="ITKN1a2b3c4d5e6f7g8h9idefcon4.html"><img src="/images/dotclear.gif" border="0" height="1" width="1" align="left"></a></td>
			</tr></table><br></td>
	</tr>
		
<!-- 	<tr>
		<td height="1" colspan="3" bgcolor="#003366"><img src="/images/dotclear.gif" border=0 alt=""></td>
	</tr> -->
</table>

<!-- END HEADER -->


<!-- BEGIN SUB HEADER -->

<table bgcolor="#003366" cellpadding="0" cellspacing="0" border="0" width="100%">

<!-- ITK TOPNAV -->
	
	<tr>
		<td align="left" valign="top" nowrap><a href="/index2.html"><img src="/images/top_tabs/home_off.gif" alt="Home" border="0"></a><a href="/pick-account.html"><img src="/images/top_tabs/accountinfo.gif" alt="Account Info" border="0"></a><!--<a href="/PSUser/usrreg.htm?AdminAction=InitAdd&Locale=en&URI=/"><img src="/images/top_tabs/subscribe.gif" alt="Subscribe" border="0"></a>--><a href="/PSUser/psuserauth.htm?cmd=login&URI=/"><img src="/images/top_tabs/login.gif" alt="Login" border="0"></a><a href="/search/"><img src="/images/top_tabs/search.gif" alt="Search" border="0"></a><a href="/PSUser/EWIPOMain.html"><img src="/images/top_tabs/my_itknowledge.gif" alt="My ITKnowledge" border="0"></a><a href="/faq/faq.html"><img src="/images/top_tabs/faq.gif" alt="FAQ" border="0"></a><a href="/sitemap.html"><img src="/images/top_tabs/sitemap.gif" alt="Sitemap" border="0"></a><a href="/contactus.html"><img src="/images/top_tabs/contact_us.gif" alt="Contact Us" border="0"></a></td> 
	</tr>
	
<!-- END of ITK TOPNAV -->

<!-- ITK LOGO and newsletter sign up -->

</table>
	
<table cellpadding="0" cellspacing="0" border="0" width="100%">

	<tr>
		<td align="left" valign="top" nowrap><img src="/images/itk_logo_sm.jpg" alt="" border="0"></td>
		<td align="right"><font face="verdana, sans-serif" size="1">

<script language="JavaScript">
<!-- 

var days = new Array(8);
days[1] = "Sunday";
days[2] = "Monday";
days[3] = "Tuesday";
days[4] = "Wednesday";
days[5] = "Thursday";
days[6] = "Friday";
days[7] = "Saturday";

var months = new Array(13);
months[1] = "January";
months[2] = "February";
months[3] = "March";
months[4] = "April";
months[5] = "May";
months[6] = "June";
months[7] = "July";
months[8] = "August";
months[9] = "September";
months[10] = "October";
months[11] = "November";
months[12] = "December";

var dateObj = new Date()
var wday = days[dateObj.getDay() + 1]
var lmonth = months[dateObj.getMonth() + 1]
var date = dateObj.getDate()
var fyear = dateObj.getYear()
if (fyear <1000) fyear += 1900;
document.write(wday + ", " + lmonth + " " + date + ", " + fyear)
                
//-->
</script>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>
<br><br>


		 </td>
	</tr>
	</table>

<!-- END ITK LOGO and newsletter sign up-->
	
<!-- begin of ITK left NAV -->

<!-- BEGIN LEFT NAVBAR -->

<!-- BEGIN LEFT NAVBAR -->

	<table border="0" cellpadding="0" cellspacing="0">
	
	
		<tr>
		<td width="145" valign="top" align="left" rowspan=8>
		
	<!-- KEYWORD SEARCH -->	
<script language="JavaScript1.2">
<!--
function checkForQuery(fm) {
  /* get the query value */
  var i = escape(fm.query.value);
  if (i == "") {
      alert('Please enter a search word or phrase');
      return false;
  }                  /* query is blank, dont run the .jsp file */
  else return true;  /* execute the .jsp file */
}
//-->
</script>
	
	
	<form name="keyword" method="POST" action="http://ewsearch.earthweb.com:80/jsp/k2search/ewkwk2search_p2.jsp" onSubmit=" return checkForQuery(this); ">
<img src="/images/keyword_searcha.gif" vspace="5" width="145" alt="" border="0">
<INPUT type="hidden" name="collection" value="corpitk_p2">
<INPUT type="hidden" name="altcoll" value="allbooks_p2">
<INPUT type="hidden" name="topics" value="itk_www">
<INPUT type="hidden" name="hl" value="off">
<INPUT name="sortspec" type=hidden value="vspubdate desc score desc">
<INPUT name=fields type=hidden value="vdkvgwkey score vstitle vsauthor vsisbn vspublisher vspubdate">		
<INPUT name=imageprefix type=hidden value="http://www.itknowledge.com">
<INPUT name=ssiFolder type=hidden value="itk">
		
		<table width="145" border="0" cellpadding="0" cellspacing="0">
		<tr>
		<td width="145">&nbsp;&nbsp;<input type="text" name="query" value="" size="11">&nbsp;<input type="image" width=28 height=23 border=0 value="Go" name="Go" src="/images/go.gif" align=absmiddle><br>
&nbsp;&nbsp;<INPUT type="radio" name="scope" value="" checked><FONT face="arial, helvetica" size="1" color="#ffffff" size="1">All ITKnowledge</FONT><br>
&nbsp;&nbsp;<INPUT type="radio" name="scope" value="sourcecode"><FONT face="arial, helvetica" size="1" color="#ffffff" size="1">Source Code</FONT><br>
			<font face="arial, helvetica" size="2">
			<img src="/images/dotclear.gif" width="1" height="5" alt="" border="0"><br>
			
			&nbsp;&nbsp;<a href="/search/search-tips.html"><img src="/images/arrows_blue.gif" alt="" border="0"><font size="1" color="#ffffff">Search Tips</font></a><br>
			&nbsp;&nbsp;<a href="/search/"><img src="/images/arrows_blue.gif" alt="" border="0"><font size="1" color="#ffffff">Advanced Search</font></a><br>
			
			</font>
			
		</td>
		<td width="5"><img src="/images/dotclear.gif" width=5 height=10 hspace="5" alt="" border="0"></td>
		</tr>
		</table>
	</form>
		
		
<!-- BROWSE BY TOPIC -->
		

<form name="meta" method="POST" action="http://ewsearch.earthweb.com:80/jsp/k2search/ewmetak2search_p2.jsp" onSubmit=" return checkForQuery(this); ">
<img src="/images/publication_searcha.gif" width="145" alt="" border="0">
<INPUT type="hidden" name="collection" value="allbooks_p2">
<INPUT type="hidden" name="altcoll" value="corpitk_p2">
<INPUT type="hidden" name="topics" value="itk_www">
<INPUT type="hidden" name="hl" value="off">
<INPUT name="sortspec" type=hidden value="vspubdate desc score desc">
<INPUT name=fields type=hidden value="vdkvgwkey score vstitle vsauthor vspublisher vspubdate">
<INPUT name=imageprefix type=hidden value="http://www.itknowledge.com">
<INPUT name=ssiFolder type=hidden value="itk">
		
<table width="145" border="0" cellpadding="0" cellspacing="0">
	
			<tr>
			<td valign="top">
			&nbsp;&nbsp;<input type="text" name="query" value="" size="11">&nbsp;<input type="image" width=28 height=23 border=0 value="Go" name="Go" src="/images/go.gif" align=absmiddle><br><font face="arial, helvetica" size="2">
			&nbsp;&nbsp;<SELECT NAME="metatags" style="font-size: 12; font-family: sans-serif;" size="1">
			<option value="vstitle" SELECTED>Title
			<option value="vsauthor">Author
			<option value="vspublisher">Publisher
			<option value="vsisbn">ISBN			
			</SELECT><br><br></font>
			</td>
			</tr>
</table>
</form>

<form action="" name="catlist">	
<table width="145" border="0" cellpadding="0" cellspacing="0">				
			<tr>
			<td valign="top">
			<img src="/images/jump_topica.gif" width="145" alt="" border="0">
			</td>
			</tr>
			<tr>
			<td width="145">
				
	        	<font face="Arial,helvetica" size="1">
				&nbsp;&nbsp;<SELECT NAME="cat" onChange='top.location.href=this.options[selectedIndex].value;' style="font-size: 10; font-family: sans-serif;">
                        <option value="" selected>Please Select
                        <option value="">-----------
						<option value="/reference/dir.1-busman.html">Business &amp; IT Mgmt
						<option value="/reference/dir.2-certification.html">Certification &amp; Training                       
						<option value="/reference/dir.3-databaseanderp.html">Database &amp; ERP
                        <option value="/reference/dir.4-desktopapps.html">Desktop Apps
                        <option value="/reference/dir.5-desktoppubanddesign.html">Graphic Design
                        <option value="/reference/dir.6-generalinternet.html">General Internet
                        <option value="/reference/dir.7-hardwareandos.html">Hardware &amp; OS
                        <option value="/reference/dir.8-ibmredbooks.html">IBM RedBooks
                        <option value="/reference/dir.9-networktelcom.html">Network &amp; Telecom
						<option value="/reference/dir.10-websoftwaredev.html">Web &amp; Software Dev
                        <option value="">-----------

                        <option value="/reference/dir.archive1.html">Public Archive               
                        </SELECT>
			</font>
			
		</td>
		</tr>
	</table>
	</form>
	
<!-- LEFT NAV SEARCH END -->

	</td>
		

<!-- END LEFT NAVBAR -->


<!-- END LEFT NAVBAR -->
	
	<td width="15"><img src="/images/dotclear.gif" width="15" alt="" border="0"></td>

<!-- end of ITK left NAV -->

<!-- begin main content -->
	
	<td width="100%" valign="top" align="left">
		<br>

<!-- END SUB HEADER -->
<!-- Created by dB Page Builder.  http://www.pchelponline.com/bluestem -->

<!--Begin Content Column -->

<TABLE border=0 cellspacing=0 cellpadding=0>
<tr>
<td width=75 valign=top>
<img src="/images/sm_covers/1576104265.gif" width=60 height=73 alt="Perl Core Language Little Black Book" border="1">
</td>
<td align="left">
    <font face="arial, helvetica" size="-1" color="#336633"><b>Perl Core Language Little Black Book</b></font>
    <br>
    <font face="arial, helvetica" size="-1"><i>by Steven Holzner</i>
    <br>
    The Coriolis Group
    <br>
    <b>ISBN:</b>&nbsp;1576104265<b>&nbsp;&nbsp;&nbsp;Pub Date:</b>&nbsp;03/01/99</font>&nbsp;&nbsp;<A HREF="http://www.digitalguru.com/dgstore/product.asp?isbn=1576104265&ac%5Fid=28" TARGET="anotherwindows"><img src="/images/buyit.gif" width=64 height=23 hspace="5" align="middle" alt="Buy It" border="0"></a><a href="/PSUser/EWBookMarks.html?url=http://www.itknowledge.com/reference/standard/1576104265/ewtoc.html&isbn=1576104265"><img src="/images/bookmarkit.gif" border=0 align="middle" alt="Bookmark It" width=97 height=23></a>
</td>
</tr>
</table>
<P>
<FORM name= "search2" method="POST" action="http://ewsearch.earthweb.com:80/jsp/k2search/ewintrak2search_p2.jsp" onSubmit=" return checkForQuery(this); ">
<INPUT type="hidden" name="collection" value="corpitk_p2">
<INPUT type="hidden" name="altcoll" value="allbooks_p2">
<INPUT type="hidden" name="hl" value="off">
<INPUT name="sortspec" type=hidden value="score desc">
<INPUT name="fields" type=hidden value="vdkvgwkey score vstitle vsisbn vsauthor vspublisher vspubdate">
<INPUT name="imageprefix" type=hidden value="http://www.itknowledge.com">
<INPUT name="ssiFolder" type=hidden value="itk">
<INPUT name="topics" type=hidden value="itk_www">
<INPUT type="hidden" name="bookid" value="t_1576104265">
<font face="arial, helvetica" size=2><b>Search this book:</b></font><br>
<INPUT NAME="query" size=25 VALUE="">&nbsp;<input type="image" width=28 height=23 border=0 value="Go" name="Go" src="/images/go.gif" align=absmiddle>

</form>


<!-- Empty Reference Subhead -->

<!--ISBN=1576104265//-->
<!--TITLE=Perl Core Language Little Black Book//-->
<!--AUTHOR=Steven Holzner//-->
<!--PUBLISHER=The Coriolis Group//-->
<!--CHAPTER=21//-->
<!--PAGES=461-469//-->
<!--UNASSIGNED1//-->
<!--UNASSIGNED2//-->

<CENTER>
<TABLE BORDER>
<TR>
<TD><A HREF="21-03.html">Previous</A></TD>
<TD><A HREF="../ewtoc.html">Table of Contents</A></TD>
<TD><A HREF="../book-index.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>
<P><BR></P>
<P><B><I>Listing 21.4</B> hellocookie.cgi.</I></P>
<!-- CODE //-->
<PRE>
 #!/usr/bin/perl

 use CGI;
 $co = new CGI;
 %greetings = $co-&gtcookie(&#145;greetings&#146;);

 if ($co-&gtparam(&#145;name&#146;)) {$greetings{&#145;name&#146;} =
     $co-&gtparam(&#145;name&#146;)}
 if ($co-&gtparam(&#145;birthday&#146;) =~ m/\d\d\/\d\d/) {
     $greetings{&#145;birthday&#146;} = $co-&gtparam(&#145;birthday&#146;);
 }
 ($day, $month, $year) = (localtime)[3, 4, 5];
 $date = join (&#147;/&#148;, $month &#43; 1, $day);

 if(exists($greetings{&#145;name&#146;})) {
     $greetingstring =&#147;Hello &#148; . $greetings{&#145;name&#146;};
     $greetingstring .=&#147;, happy birthday!&#148; if
         ($date eq $greetings{&#145;birthday&#146;});
     $greetingstring  =~ s/&lt/&amplt/;
     $prompt =&#147;If you want to change this page&#145;s settings,
         just enter new data below.&#148;;
 } else {
     $prompt =&#147;To have this page greet you next time,
         enter your data below.&#148;;
 }

 $greetingcookie = $co-&gtcookie(
     -name=&gt&#145;greetings&#146;,
     -value=&gt\%greetings,
     -expires=&gt&#145;&#43;365d&#146;
 );

 if($co-&gtparam(&#145;name&#146;) || $co-&gtparam(&#145;birthday&#146;)) {
     print $co-&gtheader(-cookie=&gt$greetingcookie);
 } else {
     print $co-&gtheader;
 }
 print
 $co-&gtstart_html(
     -title=&gt&#147;Cookie Example&#148;,
 ),
 $co-&gtcenter(
     $co-&gth1(&#147;Cookie Example&#148;),
     $co-&gtp,
     $co-&gth1($greetingstring),
     $prompt,
     $co-&gtstartform,
    &#147;Your name: &#148;,
     $co-&gttextfield(
         -name=&gt&#145;name&#146;,
         -default=&gt&#145;&#146;,
         -override=&gt1
     ),
     $co-&gtp,
    &#147;Your birthday (mm/dd): &#148;,
     $co-&gttextfield(
         -name=&gt&#145;birthday&#146;,
         -default=&gt&#145;&#146;,
         -override=&gt1
     ),
     $co-&gtp,
     $co-&gtsubmit (-value=&gt&#145;Submit&#146;),
     $co-&gtreset,
     $co-&gtendform,
 ),
 $co-&gtend_html;
</PRE>
<!-- END CODE //-->
<H3><A NAME="Heading15"></A><FONT COLOR="#000077">Creating A Game</FONT></H3>
<P>We&#146;ll finish the book in this last topic with a game, game.cgi, which is an Internet version of a traditional word game. It&#146;s interactive and fairly secure because it uses only radio buttons, submit buttons, and hyperlinks to interact with the user. And it&#146;s fun&#151;the game appears in Netscape Navigator in Figure 21.4.
</P>
<P>When the user opens this script in a Web browser, it displays a page like the one you see in Figure 21.4. Users can guess letters with the radio buttons and the submit button you see in Figure 21.4. If they guess the word before making eight wrong guesses, they see a congratulatory Web page, otherwise, the script gives them the answer and invites them to try again. They can start a new game at any time simply by clicking a radio button and then the submit button.</P>
<I><P><A NAME="Fig4"></A><A HREF="javascript:displayWindow('images/21-04.jpg',631,508 )"><IMG SRC="images/21-04t.jpg"></A>
<BR><A HREF="javascript:displayWindow('images/21-04.jpg',631,508)"><FONT COLOR="#000077"><B>Figure 21.4</B></FONT></A>&nbsp;&nbsp;Creating a game.</I>
</P>
<H4 ALIGN="LEFT"><A NAME="Heading16"></A><FONT COLOR="#000077">Storing Data In Web Pages Between Calls To A Script</FONT></H4>
<P>This script is a good example of how to use a Web page to store information between calls to your script. The hits and misses the user has made&#151;even the actual answer itself&#151;are all stored in hidden fields in a form. Storing data this way means you don&#146;t have to keep track of users between calls to your script&#151;the submitted form will give you all the information you need. Of course it also means that the user can cheat and see the answer by viewing the page&#146;s source HTML, but after all, this is just a game&#151;if it&#146;s important to you, you can encrypt that information (see Comprehensive Perl Archive Network (CPAN) at <A HREF="www.cpan.org/cpan.html">www.cpan.org/CPAN.html</A>).</P>
<H4 ALIGN="LEFT"><A NAME="Heading17"></A><FONT COLOR="#000077">Customizing This Game</FONT></H4>
<P>To install this game, you&#146;ll need game.cgi, which appears in Listing 21.5. You&#146;ll also need a file of words, called answers.dat, that the game can use for the user to guess. I&#146;ve tried to make this unavoidable requirement as flexible as possible&#151;answers.dat can be any length you like and use words of arbitrary length. All you need to do is to place one (lowercase) word per line in answers.dat, and don&#146;t use any commas, spaces, or other delimiters. The script is written to accept plain text files that separate lines in either Unix style (with <B>\n</B>) or DOS style (with <B>\r\n</B>), so you can create answers.dat on your own system and upload it (just don&#146;t forget to give it an appropriate permission, such as 644 in Unix, so that game.cgi can read it). Here&#146;s how some entries in answers.dat might look:</P>
<!-- CODE SNIP //-->
<PRE>
 instruction
 history
 attempt
 harpsicord
 flower
 person
 pajamas
</PRE>
<!-- END CODE SNIP //-->
<P>Because this is usually a visual game, this script also automatically uses images of the kind you see at left in Figure 21.4, if you supply them. (There&#146;s no problem if you don&#146;t&#151;the script checks to see if the graphics files exist before using them.) You store these images in the same directory as game.cgi, with the names hang1.gif, hang2.gif, and so on up to hang8.gif, corresponding to the opening screen and the possible wrong guesses the user can make. The hang1.gif file shows an empty gallows, hang2.gif shows a gallows with the victim&#146;s head, and you proceed limb by limb all the way to the next-to-last wrong guess in hang8.gif. If the player makes that last wrong guess, the game displays hang9.gif (if it exists) along with the answer; if the user wins, the game displays hang10.gif (if it exists) on the congratulatory page. All in all, it&#146;s a pretty customizable script&#151;hopefully you&#146;ll enjoy it!
</P>
<P><B><I>Listing 21.5</B> game.cgi.</I></P>
<!-- CODE //-->
<PRE>
 #!/usr/bin/perl

 use CGI;
 $co = new CGI;
 if ($co-&gtparam(&#145;newgame&#146;) eq&#147;yes&#148; ||
         !$co-&gtparam(&#145;newgame&#146;)){
     newgame();
 } else {
     if($co-&gtparam(&#145;newgameyesno&#146;) eq&#147;yes&#148;){
          newgame();
     } else {
         $theanswer = $co-&gtparam(&#145;answer&#146;);
         $theguess = getguess();
         if($theguess eq&#147;-&#148;){
             $thehits = $co-&gtparam(&#145;hits&#146;);
             $themisses = $co-&gtparam(&#145;misses&#146;);
             displayresult();
         } else {
             $thehits = gethits();
             if (index($thehits,&#147;-&#148;) eq -1){
                 youwin();
             } else {
                 $themisses = getmisses();
                 if(length($themisses) &gt= 9){
                     youlose();
                 } else {
                     displayresult();
                 }
             }
         }
     }
 }
 sub newgame
 {
     $datafile =&#147;answers.dat&#148;;
     open ANSWERDATA, $datafile;
     @answers = &ltANSWERDATA&gt;
     close (ANSWERDATA);
     srand(time ^ $$);
     $index1 = $#answers * rand;
     $theanswer = $answers[$index1];
     chomp($theanswer);
     $themisses =&#147;-&#148;;
     $thehits =&#147;&#148;;
     for($loopindex = 0; $loopindex &lt length($theanswer);
         $loopindex&#43;&#43;){
         $thehits .=&#147;-&#148;;
     }
     displayresult();
 }
 sub getguess
 {
     $theguess =&#147;-&#148;;
     if ($co-&gtparam(&#145;letters&#146;)){
         $theguess = lc($co-&gtparam(&#145;letters&#146;));
     }
     return $theguess;
 }
 sub displayresult
 {
     print
     $co-&gtheader,
     $co-&gtstart_html(-title=&gt&#145;Word Game&#146;, -author=&gt&#145;Steve&#146;,
     -bgcolor=&gt&#145;black&#146;, -text=&gt&#145;#ffff00&#146;, -link=&gt&#145;#ff0000&#146;,
     -alink=&gt&#145;#ffffff&#146;, -vlink=&gt&#145;#ffff00&#146;),
     $co-&gtcenter(
    &#147;&ltfont color = #ffff00&gt&#148;,
     $co-&gth1(&#145;Word Game!&#146;),
     $co-&gthr
     );
     $len = length($themisses);
     if (-e&#147;hang${len}.gif&#148;) {
         print $co-&gtimg({-src=&gt&#147;hang${len}.gif&#148;,
             -align=&gtleft, -vspace=&gt10, -hspace=&gt1});
     }
     print
     $co-&gtcenter(
     $co-&gth1($thehits),
    &#147;&ltcont color = #ffff00&gt&#148;,
     $co-&gth2(&#147;Misses (8 max):&#147; . substr($themisses, 1)),
     $co-&gtstartform,
     $co-&gthidden(-name=&gt&#145;newgame&#146;, -default=&gt&#148;no&#148;,
         -override=&gt1),
     $co-&gthidden(-name=&gt&#145;answer&#146;, -default=&gt&#147;$theanswer&#148;,
         -override=&gt1),
     $co-&gthidden(-name=&gt&#145;hits&#146;, -default=&gt&#147;$thehits&#148;,
         -override=&gt1),
     $co-&gthidden(-name=&gt&#145;misses&#146;, -default=&gt&#147;$themisses&#148;,
         -override=&gt1),
     $co-&gtbr,
    &#147;Guess a letter:&#148;,
     $co-&gtbr,
     ),
    &#147;&ltcenter&gt&#148;,
    &#147;A&ltinput type = radio name = \&#147;letters\&#148; value = \&#147;A\&#148;
         checked&gt&#148;;
     for ($loopindex = ord(&#145;B&#146;); $loopindex &lt= ord(&#145;M&#146;);
         $loopindex&#43;&#43;) {
         $c = chr($loopindex);
         print&#147;${c}&ltinput type = radio name = \&#147;letters\&#148;
         value = \&#147;${c}\&#148; &gt&#147;;
     }
     print $co-&gtbr;
     for ($loopindex = ord(&#145;N&#146;); $loopindex &lt= ord(&#145;Z&#146;);
         $loopindex&#43;&#43;) {
         $c = chr($loopindex);
         print&#147;${c}&ltinput type = radio name = \&#147;letters\&#148;
         value = \&#147;${c}\&#148; &gt&#148;;
     }
     print $co-&gtbr,
    &#147;Then submit your guess by clicking &#148;,
     $co-&gtsubmit(-value=&gt&#145;this button&#146;),
     $co-&gtbr, $co-&gtbr,
    &#147;Start new game?&#148;,
    &#147;&ltinput type = radio name = \&#147;newgameyesno\&#148; value =
         \&#147;yes\&#148;&gt Yes&#148;,
    &#147;&ltinput type = radio name = \&#147;newgameyesno\&#148; value =
         \&#147;no\&#148; checked&gt No&#148;,
    &#147;&lt/center&gt&#148;,
     $co-&gtendform,
    &#147;&lt/font&gt&#148;,
     $co-&gtend_html;
 }
 sub gethits
 {
     $temphits = $co-&gtparam(&#145;hits&#146;);
     $thehits =&#147;&#148;;
     for($loopindex = 0; $loopindex &lt length($theanswer);
         $loopindex&#43;&#43;){
         $thechar = substr($temphits, $loopindex, 1);
         $theanswerchar = substr($theanswer, $loopindex, 1);
         if($theguess eq $theanswerchar){
             $thechar = $theguess;
         }
         $thehits .= $thechar;
     }
     return $thehits;
 }
 sub getmisses
 {
     $themisses = $co-&gtparam(&#145;misses&#146;);
     if(index($theanswer, $theguess) eq -1){
         if(index($themisses, $theguess) eq -1){
             $themisses .= $theguess;
         }
     }
     return $themisses;
 }
 sub youwin
 {
     print
     $co-&gtheader,
     $co-&gtstart_html(-title=&gt&#145;Word Game&#146;, -author=&gt&#145;Steve&#146;,
     -bgcolor=&gt&#145;black&#146;, -text=&gt&#145;#ffff00&#146;, -link=&gt&#145;#ff0000&#146;,
     -alink=&gt&#145;#ffffff&#146;, -vlink=&gt&#145;#ffff00&#146;),
    &#147;&ltcenter&gt&#148;,
    &#147;&ltfont color = #ffff00&gt&#148;,
     $co-&gth1(&#145;Word Game!&#146;),
     $co-&gthr,
     $co-&gtbr,
    &#147;&lt/font&gt&#148;,
    &#147;&ltfont color = #ffffff&gt&#148;;
     if (-e&#147;hang10.gif&#148;) {
         print $co-&gtimg({-src=&gt&#147;hang10.gif&#148;,
             -align=&gtleft, -vspace=&gt10, -hspace=&gt1});
     }
     print
     $co-&gth1(&#147;You got it:&#148;, $theanswer),
     $co-&gth1(&#147;You win!&#148;),
     $co-&gtbr, $co-&gtbr,
     $co-&gtstartform,
     $co-&gthidden(-name=&gt&#145;newgame&#146;, -default=&gt&#147;yes&#148;,
         -override=&gt1),
     $co-&gtbr, $co-&gtbr,
     $co-&gtsubmit(-value=&gt&#145;New Game&#146;),
     $co-&gtendform,
    &#147;&lt/font&gt&#148;,
    &#147;&lt/center&gt&#148;,
     $co-&gtend_html;
 }
 sub youlose
 {
     print
     $co-&gtheader,
     $co-&gtstart_html(-title=&gt&#145;Word Game&#146;, -author=&gt&#145;Steve&#146;,
     -bgcolor=&gt&#145;black&#146;, -text=&gt&#145;#ffff00&#146;,
     -link=&gt&#145;#ff0000&#146;, -alink=&gt&#145;#ffffff&#146;,
     -vlink=&gt&#145;#ffff00&#146;),
    &#147;&ltcenter&gt&#148;,
    &#147;&ltfont color = #ffff00&gt&#148;,
     $co-&gth1(&#145;Word Game!&#146;),
     $co-&gthr,
     $co-&gtbr,
    &#147;&lt/font&gt&#148;,
    &#147;&ltfont color = #ffffff&gt&#148;;
     if (-e&#147;hang9.gif&#148;) {
         print $co-&gtimg({-src=&gt&#147;hang9.gif&#148;,
             -align=&gtleft, -vspace=&gt10, -hspace=&gt1});
     }
     print
     $co-&gth1(&#147;The answer:&#148;, $theanswer),
     $co-&gth1(&#148;Sorry, too many guesses taken!&#148;, $co-&gtbr,
     $co-&gtbr,&#147;Better luck next time.&#148;),
     $co-&gtbr, $co-&gtbr,
     $co-&gtstartform,
     $co-&gthidden(-name=&gt&#145;newgame&#146;, -default=&gt&#147;yes&#148;,
         -override=&gt1),
     $co-&gtbr, $co-&gtbr,
     $co-&gtsubmit(-value=&gt&#145;New Game&#146;),
     $co-&gtbr,
     $co-&gtendform,
    &#147;&lt/font&gt&#148;,
    &#147;&lt/center&gt&#148;,
     $co-&gtend_html;
 }
</PRE>
<!-- END CODE //-->
<P><BR></P>
<CENTER>
<TABLE BORDER>
<TR>
<TD><A HREF="21-03.html">Previous</A></TD>
<TD><A HREF="../ewtoc.html">Table of Contents</A></TD>
<TD><A HREF="../book-index.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>

<hr width="90%" size="1" noshade>
<div align="center">
<font face="Verdana,sans-serif" size="1">Copyright &copy; <a href="/reference/tcg00001.html">The Coriolis Group, Inc.</a></font>
</div>
<!-- all of the reference materials (books) have the footer and subfoot reveresed -->
<!-- reference_subfoot = footer -->
<!-- reference_footer = subfoot -->

<!-- BEGIN SUB FOOTER -->
	<br>
	<img src="/images/dotclear.gif" width="5" height="7" border="0">
	</TD>
    </TR>
	</TABLE>
	
	<table width="100%" border=0 cellpadding=0 cellspacing=0>
	<tr>
		<td align="left" width="160"><img src="/images/bot_curve.jpg" width="160" alt="" border="0"></td>
		<td align="left" valign="top" nowrap><a href="/index2.html"><img src="/images/top_tabs/home_bot.gif" alt="Home" border="0"></a><a href="/pick-account.html"><img src="/images/top_tabs/account_info_bot.gif" alt="Account Info" border="0"></a><a href="/PSUser/usrreg.htm?AdminAction=InitAdd&Locale=en&URI=/"><img src="/images/top_tabs/subscribe_bot.gif" alt="Subscribe" border="0"></a><a href="/PSUser/psuserauth.htm?cmd=login&URI=/"><img src="/images/top_tabs/login_bot.gif" alt="Login" border="0"></a><a href="/search/"><img src="/images/top_tabs/search_bot.gif" alt="Search" border="0"></a><a href="/PSUser/EWIPOMain.html"><img src="/images/top_tabs/my_itknowledge_bot.gif" alt="My ITKnowledge" border="0"></a><a href="/faq/faq.html"><img src="/images/top_tabs/faq_bot.gif" alt="FAQ" border="0"></a><a href="/sitemap.html"><img src="/images/top_tabs/sitemap_bot.gif" alt="Sitemap" border="0"></a><a href="/contactus.html"><img src="/images/top_tabs/contact_us_bot.gif" alt="Contact Us" border="0"></a></td> 
	</tr>
	</table>
		
	<table width="100%" bgcolor="#003366" border=0 cellpadding=0 cellspacing=0>
	<tr>
		<td align="left" width=145><img src="/images/clear_pixel.gif" width=145 height="1" alt="" border="0"></td>
				
<!-- END SUB FOOTER -->

<!-- all of the books have the footer and subfoot reveresed -->
<!-- reference_subfoot = footer -->
<!-- reference_footer = subfoot -->

<!-- FOOTER -->
			
<td align="left" bgcolor="#003366">
<table border="0" cellspacing="10" cellpadding="5">
<tr>
<td align="center">
<font face="arial, helvetica" size="1" color="#cccccc"><b><a href="/products.html"><font color="#0099CC">Products</font></a>&nbsp;|&nbsp; <a href="/contactus.html"><font color="#0099CC">Contact Us</font></a>&nbsp;|&nbsp; <a href="http://www.earthweb.com/dlink.corp|about_us-jhtml.72.0.-.0.jhtml" target="resource window"><font color="#0099CC">About Us</font></a>&nbsp;|&nbsp; <a href="http://www.earthweb.com/dlink.corp|privacy-jhtml.72.0.-.-.jhtml" target="resource window"><font color="#0099CC">Privacy</font></a> &nbsp;|&nbsp; <a href="http://www.itmarketer.com/" target="resource window"><font color="#0099CC">Ad Info</font></a> &nbsp;|&nbsp; <a href="/index2.html"><font color="#0099CC">Home</font></a></b>
<br><br>Use of this site is subject to certain <a href="/agreement.html"><font color="#0099CC">Terms &amp; Conditions</font></a>, <a href="/copyright.html"><font color="#0099CC">Copyright &copy; 1996-2000 EarthWeb Inc.</font></a> All rights reserved.  Reproduction in whole or in part in any form or medium without express written <a href="http://www.earthweb.com/dlink.corp|permissions-jhtml.72.0.-.-.jhtml" target="resource window"><font color="#0099CC">permission</font></a> of EarthWeb is prohibited. Read EarthWeb's <A HREF="http://www.earthweb.com/dlink.corp|privacy-jhtml.72.0.-.-.jhtml" target="resource window"><font color="#0099CC">privacy</font></A> statement.</font><br><br>
</td>
</tr>
</table>

<!-- netranger link to stop spiders -->

<a href="ITKN1a2b3c4d5e6f7g8h9idefcon4.html">
<img src="/images/dotclear.gif" border="0" height="1" width="1" align="left"></a>
</td>
		</tr>
</table>
<SCRIPT LANGUAGE="javascript">
<!--
document.write('<LAYER SRC="http://ad.doubleclick.net/adl/itk.earthweb.dart/b_soft_dev;a=b_soft_dev1;sz=468x60;ord=' + ord + '" width=468 height=60 visibility="hidden" onLoad="moveToAbsolute(layer1.pageX,layer1.pageY);clip.height=60;clip.width=468; visibility=\'show\';"></LAYER>');
document.write('<LAYER SRC="http://ad.doubleclick.net/adl/itk.earthweb.dart/b_soft_dev;a=b_soft_dev4;sz=160x60;ord=' + ord + '" width=160 height=60 visibility="hidden" onLoad="moveToAbsolute(layer4.pageX,layer4.pageY);clip.height=60;clip.width=160; visibility=\'show\';"></LAYER>');
document.write('<LAYER SRC="http://ad.doubleclick.net/adl/itk.earthweb.dart/b_soft_dev;a=b_soft_dev3;sz=125x125;ord=' + ord + '" width=125 height=125 visibility="hidden" onLoad="moveToAbsolute(layer3.pageX,layer3.pageY);clip.height=125;clip.width=125; visibility=\'show\';"></LAYER>');
//-->
</SCRIPT>
</BODY>
</HTML>

<!-- END FOOTER -->

