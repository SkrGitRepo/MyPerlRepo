#!/usr/bin/perl
print "content-type: text/html \n\n";

print qq(
<HTML>
<SCRIPT>
 var winobj; //is there no way to do this beside declaring a global?
 function popWindow(url){
 
     var width  = 700;
     var height = 500;
     var left   = (screen.width  - width)/2;
     var top    = (screen.height - height)/2;
     var params = 'width='+width+', height='+height;
     
     params += ', top='+top+', left='+left;
     params += ', directories=no';
     params += ', location=no';
     params += ', menubar=no';
     params += ', resizable=no';
     params += ', scrollbars=yes';
     params += ', status=no';
     params += ', toolbar=no';
     
     //refresh if window is still open
     if(winobj && !winobj.closed){
        alert('reloading..');
        winobj.location.href = url;
     }else{
        alert('opening as new..');
        winobj=window.open(url, 'x', params);
     }

     if (window.focus) {winobj.focus()}

     return false;
     
 }

</SCRIPT>
 <BODY>
   <FORM ACTION="#">
        <INPUT TYPE="BUTTON" VALUE="OPEN WINDOW" ONCLICK="popWindow('TestScriptCGI.cgi');"/>
   </FORM>
 </BODY>
</HTML>

);